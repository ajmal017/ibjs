<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sugar/2.0.4/sugar.js"></script>
        <script src="https://unpkg.com/vue@2.4.2/dist/vue.js"></script>
        <script src="https://unpkg.com/dop/dist/dop.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Roboto|Ubuntu+Mono" rel="stylesheet">
        <style>
            * { font-family: 'Ubuntu Mono', monospace; }
        </style>
    </head>
    <body>
        <div id="app">
            <ul v-for="(value, key) in model">
                <li>
                    {{ key }}:
                    <ul v-for="(value, key) in value">
                        <li>
                            {{ key }}: 
                            <div v-if="typeof value == 'object'">
                                <ul v-for="(value, key) in value">
                                    <li>
                                        {{ key }}: 
                                        <span v-if="value.abbreviation !== undefined && value.amount !== undefined">
                                            {{ value.formatted }}
                                        </span>
                                        <span v-else>
                                            {{ value }}
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <span v-else>
                                {{ value }}
                            </span>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <script>
            (async function() {
                let server = dop.connect({url:'ws://localhost:4444'});
                let model = window.model = await server.subscribe();
                new Vue({ el: '#app', data: { model: model } });
            })();
        </script>
    </body>
</html>    


